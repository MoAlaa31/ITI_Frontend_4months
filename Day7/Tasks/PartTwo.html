<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/8e1488fa5e.js" crossorigin="anonymous"></script>
</head>
<style>
    div.bar {
        width: 400px;
        margin: 15px auto 20px;
    }

    div.search {
        width: 280px;
        height: 30px;
        background-color: gray;
        border-radius: 15px;
        display: inline-block;
    }

    .search button {
        background-color: gray;
        border: none;
        height: 100%;
        margin-left: 5px;
        margin-right: 15px;
    }

    .search input {
        background-color: gray;
        margin-left: 15px;
        width: 210px;
        height: 100%;
        border: none;
        color: white;
    }

    .search ::placeholder {
        color: white;
    }

    .choice {
        background-color: gray;
        height: 30px;
        color: white;
        border-radius: 5px;
        width: 80px;
        margin-left: calc(400px - 280px - 85px);
    }

    table,
    th,
    td {
        border: none;
    }

    div.tabl {
        width: 400px;
        height: 400px;
        background-color: aqua;
        border-radius: 15px;
        margin: auto;
    }

    #myTable {
        width: 400px;
    }

    #myTable td {
        width: 10px;
        padding: 5px 10px;
    }

    /* #myTable th {
        background-color: darkcyan;
        } */
    #myTable tr:first-child {
        background-color: darkcyan;
        color: white;
    }

    #myTable th:first-child {
        background-color: darkcyan;
        border-top-left-radius: 15px;
    }

    #myTable th:last-child {
        background-color: darkcyan;
        border-top-right-radius: 15px;
    }
</style>

<body>
    <div class="bar">

        <div class="search">
            <input type="search" id="q" placeholder="search by Course or Name">
            <button type="submit" class="search-button">
                <i class="fa-solid fa-magnifying-glass" style="color: white;"></i>
            </button>
        </div>
        <select name="choice" class="choice">
            <option value="" selected disabled hidden>Sort Type</option>
            <option value="1">Name</option>
            <option value="2">Age</option>
        </select>
    </div>
    <div class="tabl">
        <table id="myTable">
            <tbody>
            </tbody>
        </table>
    </div>

    <script>
        var students = [
            { name: "Ali", age: 20, Crs: "CS" },
            { name: "Sara", age: 22, Crs: "Math" },
            { name: "Omar", age: 19, Crs: "Physics" },
            { name: "Laila", age: 21, Crs: "CS" },
            { name: "Hassan", age: 23, Crs: "Engineering" },
            { name: "Mona", age: 20, Crs: "Biology" },
            { name: "Kareem", age: 24, Crs: "Math" },
            { name: "Noor", age: 18, Crs: "CS" }
        ];

        var myCopy = students.slice();

        var MyTable = document.querySelector("#myTable");
        var mySelect = document.querySelector("select");
        var myInput = document.querySelector("#q");


        function sortStudents(myarr) {
            if (mySelect.value === "1") {
                // sort by name (case-insensitive)
                myarr.sort(function (a, b) {
                    if (a.name.toLowerCase() < b.name.toLowerCase()) {
                        return -1;
                    }
                    else if (a.name.toLowerCase() > b.name.toLowerCase()) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                });
            } else if (mySelect.value === "2") {
                // sort by age
                myarr.sort(function (a, b) {
                    return a.age - b.age;
                });
            }
            return myarr;
        }

        MyTable.children[0].innerHTML = `<tr><th>Name</th><th>Age</th><th>Course</th></tr>`;

        myCopy.forEach(function (ele) {
            MyTable.children[0].innerHTML += `<tr><td>${ele.name}</td><td>${ele.age}</td><td>${ele.Crs}</td></tr > `;
        });


        myInput.addEventListener("input", function () {
            MyTable.children[0].innerHTML = `<tr><th>Name</th><th>Age</th><th>Course</th></tr>`;
            var txt = this.value;
            var arr;
            if (txt == "") {
                arr = students.slice();
            }
            else {
                var arr = students.filter(function (ele) {
                    if (ele.Crs.toLowerCase().includes(txt.toLowerCase()) || ele.name.toLowerCase().includes(txt.toLowerCase())) {
                        return true;
                    }
                    else {
                        return false;
                    }
                })
            }
            sortStudents(arr);
            arr.forEach(function (ele) {
                MyTable.children[0].innerHTML += `<tr><td>${ele.name}</td><td>${ele.age}</td><td>${ele.Crs}</td></tr > `;
            });

        })

        mySelect.addEventListener("change", function () {
            MyTable.children[0].innerHTML = `<tr><th>Name</th><th>Age</th><th>Course</th></tr>`;
            var txt = myInput.value;
            var arr;
            if (txt == "") {
                arr = students.slice();
            }
            else {
                var arr = students.filter(function (ele) {
                    if (ele.Crs.toLowerCase().includes(txt.toLowerCase()) || ele.name.toLowerCase().includes(txt.toLowerCase())) {
                        return true;
                    }
                    else {
                        return false;
                    }
                })
            }
            sortStudents(arr);
            arr.forEach(function (ele) {
                MyTable.children[0].innerHTML += `<tr><td>${ele.name}</td><td>${ele.age}</td><td>${ele.Crs}</td></tr > `;
            });
        });
    </script>
</body>

</html>